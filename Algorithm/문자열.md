# 문자열 검색 알고리즘

주어진 긴 '짚더미' 문자열 H가 '바늘' 문자열 N을 부분 문자열로 포함하는지 확인하고, 포함한다면 N과 일치하는 부분 문자열의 시작 위치를 찾는 문제를 문자열 검색 문제라고 한다.

## KMP 알고리즘

문자열 검색시 불필요한 문자간 비교를 없애기 위해 실패 함수를 사용하여, 문자열 검색시 일치하지 않는 문자가 있을때 지금까지 일치한 결과를 이용하여 다음으로 시도해야할 시작 위치를 빠르게 찾아내는 알고리즘이다.


### 실패 함수(부분 일치 테이블, pi) 계산 코드

// N에서 자기 자신을 찾으면서 나타나는 부분 일치를 이용해 pi[] 계산
// pi[i] = N[..i]의 접미사도 되고 접두사도 되는 문자열의 최대 길이
vector<int> getPartailMatch(const string& N)
{
	int m = N.size();
	vector<int> pi(m, 0);
	// KMP로 자기 자신을 찾는다.
	// N을 N에서 찾는다. begin = 0이면 자기 자신을 찾아버리기 때문에 1부터 시작.
	int begin = 1, matched = 0;
	
	// 비교할 문자가 N의 끝에 도달할 때까지 찾으면서 부분 일치를 모두 저장.
	while(begin + matched < m) {
		if(N[begin + matched] == N[matched]) {
			++matched;
			pi[begin + matched - 1] = matched;
		}
		else {
			if(matched == 0) ++begin;
			else {
				begin += matched - pi[matched - 1];
				matched = pi[matched - 1];
			}
		}
	}
	return pi;
}

